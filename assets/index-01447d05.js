import{i as pe,d as me,c as r,A as j,a as ee,r as w,b as V,w as ve,e as o,f as y,g as d,m as L,o as h,h as P,j as x,u as O,C as ge,k as te,l as ne,F as U,n as _e,p as be,_ as ae,I as R,P as he,t as D,q as Oe,s as ye,v as we}from"./index-628a0e06.js";import{g as Se}from"./router-96c14e43.js";import"//at.alicdn.com/t/c/font_4262358_tx308o415h8.js";var Ce="Expected a function";function I(a,e,n){var t=!0,l=!0;if(typeof a!="function")throw new TypeError(Ce);return pe(n)&&(t="leading"in n?!!n.leading:t,l="trailing"in n?!!n.trailing:l),me(a,e,{leading:t,maxWait:e,trailing:l})}var xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};const Pe=xe;function T(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),t.forEach(function(l){Me(a,l,n[l])})}return a}function Me(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var B=function(e,n){var t=T({},e,n.attrs);return r(j,T({},t,{icon:Pe}),null)};B.displayName="ClearOutlined";B.inheritAttrs=!1;const je=B;var ze={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zm-40 72H184v656h656V184zM640.01 338.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-square",theme:"outlined"};const ke=ze;function $(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),t.forEach(function(l){Le(a,l,n[l])})}return a}function Le(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var A=function(e,n){var t=$({},e,n.attrs);return r(j,$({},t,{icon:ke}),null)};A.displayName="CloseSquareOutlined";A.inheritAttrs=!1;const le=A;var De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};const Ve=De;function W(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),t.forEach(function(l){Ue(a,l,n[l])})}return a}function Ue(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var N=function(e,n){var t=W({},e,n.attrs);return r(j,W({},t,{icon:Ve}),null)};N.displayName="SaveOutlined";N.inheritAttrs=!1;const re=N;var Be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const Ae=Be;function X(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),t.forEach(function(l){Ne(a,l,n[l])})}return a}function Ne(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var H=function(e,n){var t=X({},e,n.attrs);return r(j,X({},t,{icon:Ae}),null)};H.displayName="SettingOutlined";H.inheritAttrs=!1;const He=H;var Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const Fe=Ee;function G(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),t.forEach(function(l){qe(a,l,n[l])})}return a}function qe(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var E=function(e,n){var t=G({},e,n.attrs);return r(j,G({},t,{icon:Fe}),null)};E.displayName="SyncOutlined";E.inheritAttrs=!1;const Re=E,k={length:{desc:"密码长度",str:""},includeUppercase:{desc:"包含大写字母",str:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},includeLowercase:{desc:"包含小写字母",str:"abcdefghijklmnopqrstuvwxyz"},includeNumbers:{desc:"包含数字",str:"0123456789"},includeSymbols:{desc:"包含符号",str:"!@#$%^&*()_-+=<>?"}};function J({chars:a,length:e}){let n="";for(let t=0;t<e;t++){const l=Math.floor(Math.random()*a.length);n+=a.charAt(l)}return n}const Ie=ee({__name:"creatPassword",emits:["openSave"],setup(a,{expose:e,emit:n}){const t=w(!1),l=w(!1),f=w(""),p=V({length:10,includeUppercase:!1,includeLowercase:!0,includeNumbers:!0,includeSymbols:!1}),m=w(!1),s=w("");ve(p,(g,u)=>{s.value="";for(let z in g)g[z]&&(s.value+=k[z].str)},{immediate:!0});const S=()=>{l.value=!0,f.value=J({length:p.length,chars:s.value})},i=()=>{t.value=!0,console.log(f.value),window.navigator.clipboard.writeText(f.value).then(()=>{t.value=!1,L.success("复制成功")}).catch(g=>{L.error("复制失败"),console.error(`Error copying text: ${g}`)})},C=()=>{l.value=!1,console.log("密码是：",f.value),n("openSave",f.value)},c=()=>{l.value=!1},b=I(()=>{m.value=!m.value},500),v=I(()=>{f.value=J({length:p.length,chars:s.value})},200);return e({showModal:S}),(g,u)=>{const z=o("a-input"),M=o("a-button"),F=o("a-tooltip"),oe=o("a-input-group"),ce=o("a-input-number"),q=o("a-form-item"),se=o("a-switch"),ue=o("a-textarea"),ie=o("a-form"),de=o("a-modal");return h(),y(de,{open:l.value,"onUpdate:open":u[4]||(u[4]=_=>l.value=_),title:"生成密码",onOk:i},{footer:d(()=>[r(M,{type:"dashed",onClick:u[3]||(u[3]=_=>C()),icon:x(O(re))},{default:d(()=>[P(" 保存 ")]),_:1},8,["icon"]),r(M,{onClick:c,icon:x(O(le))},{default:d(()=>[P("关闭")]),_:1},8,["icon"]),r(M,{type:"primary",loading:t.value,onClick:i,icon:x(O(ge))},{default:d(()=>[P("复制 ")]),_:1},8,["loading","icon"])]),default:d(()=>[r(oe,{compact:""},{default:d(()=>[r(z,{value:f.value,"onUpdate:value":u[0]||(u[0]=_=>f.value=_),style:{width:"calc(100% - 100px)"}},null,8,["value"]),r(F,{placement:"top",title:"配置项"},{default:d(()=>[r(M,{type:"primary",icon:x(O(He)),onClick:O(b)},null,8,["icon","onClick"])]),_:1}),r(F,{placement:"right",title:"换一个"},{default:d(()=>[r(M,{type:"primary",icon:x(O(Re)),onClick:O(v)},null,8,["icon","onClick"])]),_:1})]),_:1}),r(ie,{layout:"inline",model:p,style:_e([{"margin-top":"20px",overflow:"hidden",transition:"all .5s ease"},{height:m.value?"140px":"0"}])},{default:d(()=>[r(q,{label:O(k).length.desc},{default:d(()=>[r(ce,{id:"inputNumber",value:p.length,"onUpdate:value":u[1]||(u[1]=_=>p.length=_),min:1,placeholder:O(k).length.desc},null,8,["value","placeholder"])]),_:1},8,["label"]),(h(!0),te(U,null,ne(Object.keys(p).filter(_=>_!=="length"),_=>(h(),y(q,{label:O(k)[_].desc},{default:d(()=>[_!="length"?(h(),y(se,{key:0,checked:p[_],"onUpdate:checked":fe=>p[_]=fe},null,8,["checked","onUpdate:checked"])):be("",!0)]),_:2},1032,["label"]))),256)),r(ue,{value:s.value,"onUpdate:value":u[2]||(u[2]=_=>s.value=_),"addon-before":"字符集",style:{resize:"none"}},null,8,["value"])]),_:1},8,["model","style"])]),_:1},8,["open"])}}});const Q=ae(Ie,[["__scopeId","data-v-363a2875"]]),Y=he;async function Te(a,e){const n=new R(Y,a);try{await n.addRecord(e),L.success("保存成功"),n.close()}catch{n.close();const l=await n.getVersion(),f=new R(Y,a,l+1);await f.addRecord(e),f.close()}}const $e={name:"savePassword",props:{menuList:{type:Array}},setup(a){const{proxy:{$convertToPinyin:e}}=Oe(),n=w(!1),t=w(),l={website_name:{label:"网站名称",type:"text"},menu:{label:"所属菜单",type:"select"},website_url:{label:"网站地址",type:"text"},account:{label:"账号",type:"text"},pwd:{label:"密码",type:"password"},remarks:{label:"备注",type:"textarea"}},{menuList:f}=D(a)??[],p=f.map(c=>({value:c.id,label:c.name})),m=V({website_name:"",website_url:"",account:"",pwd:"",menu:p[0].value,remarks:""}),s=(()=>{let c={};for(let b in l)b==="remarks"||b==="website_name"||(c[b]=[{required:!0,message:"请输入 "+l[b].label}]);return c})();return{h:x,open:n,CloseSquareOutlined:le,SaveOutlined:re,ClearOutlined:je,formState:m,reset:()=>{for(const c in m){if(c==="menu"){m[c]=p[0].value;continue}m[c]=""}},save:()=>{t.value.validate().then(()=>{var b;const c=e((b=f.find(v=>v.id===m.menu))==null?void 0:b.name);Te(c,D(m))})},attrList:p,rules:s,dictionaries:l,showModal:c=>{n.value=!0,c&&(m.pwd=c)},savePasswordForm:t}}};function We(a,e,n,t,l,f){const p=o("a-input-password"),m=o("a-textarea"),s=o("a-select"),S=o("a-input"),i=o("a-form-item"),C=o("a-form"),c=o("a-button"),b=o("a-modal");return h(),y(b,{open:t.open,"onUpdate:open":e[2]||(e[2]=v=>t.open=v),title:"保存密码",onOk:t.save},{footer:d(()=>[r(c,{onClick:e[0]||(e[0]=v=>t.open=!1),icon:t.h(t.CloseSquareOutlined)},{default:d(()=>[P("取消")]),_:1},8,["icon"]),r(c,{onClick:e[1]||(e[1]=v=>t.reset()),icon:t.h(t.ClearOutlined)},{default:d(()=>[P("重置")]),_:1},8,["icon"]),r(c,{type:"primary",onClick:t.save,icon:t.h(t.SaveOutlined)},{default:d(()=>[P("保存")]),_:1},8,["onClick","icon"])]),default:d(()=>[r(C,{model:t.formState,rules:t.rules,"label-col":{style:{width:"100px"}},"wrapper-col":{span:16},ref:"savePasswordForm",style:{"margin-top":"20px"}},{default:d(()=>[(h(!0),te(U,null,ne(t.dictionaries,(v,g)=>(h(),y(i,{key:g,name:g,label:v.label},{default:d(()=>[v.type==="password"?(h(),y(p,{key:0,value:t.formState[g],"onUpdate:value":u=>t.formState[g]=u,valueModifiers:{trim:!0,lazy:!0},placeholder:"这里填 "+v.label},null,8,["value","onUpdate:value","placeholder"])):v.type==="textarea"?(h(),y(m,{key:1,value:t.formState[g],"onUpdate:value":u=>t.formState[g]=u,valueModifiers:{trim:!0,lazy:!0},placeholder:"这里填 "+v.label},null,8,["value","onUpdate:value","placeholder"])):v.type==="select"?(h(),y(s,{key:2,value:t.formState[g],"onUpdate:value":u=>t.formState[g]=u,valueModifiers:{trim:!0,lazy:!0},options:t.attrList,placeholder:"这里填 "+v.label},null,8,["value","onUpdate:value","options","placeholder"])):(h(),y(S,{key:3,value:t.formState[g],"onUpdate:value":u=>t.formState[g]=u,valueModifiers:{trim:!0,lazy:!0},placeholder:"这里填 "+v.label},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1032,["name","label"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["open","onOk"])}const Z=ae($e,[["render",We]]);function K(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!we(a)}const Qe=ee({name:"index",components:{createPasswordModal:Q,savePasswordModal:Z},setup(){const a=w(null),e=w(null),n=ye(),{menuList:t}=n,l=V([{name:"导出我的密码",id:1,icon:"#icon-daochu"},{name:"导入我的密码",id:2,icon:"#icon-daoru"},{name:"生成一个密码",id:3,icon:"#icon-verify"},{name:"记录一条密码",id:4,icon:"#icon-jilu"}]),f=s=>{switch(console.log("生成密码",s),s){case 3:p();break;case 4:m();break}},p=()=>{a.value&&a.value.showModal()},m=s=>{e.value&&e.value.showModal(s)};return()=>{let s,S;return r("div",{style:"width: 100%;"},[r(o("a-row"),{gutter:[30,30],class:"list"},K(s=t.sort((i,C)=>i.order-C.order).map((i,C)=>r(o("a-col"),{xs:8,sm:6,lg:4,xl:3},{default:()=>[r("div",{class:"list_item",onClick:()=>{Se({path:"/password",params:{id:i.id}})}},[r("div",{class:"left"},[r("svg",{class:"icon","aria-hidden":"true"},[r("use",{"xlink:href":i.icon},null)]),r("span",null,[i.name])]),r("div",{class:"right"},[i.num])])]})))?s:{default:()=>[s]}),r(o("a-row"),{gutter:[30,30]},K(S=l.map((i,C)=>r(U,null,[r(o("a-col"),{xs:12,sm:6},{default:()=>[r("div",{class:"operation-button",onClick:()=>{f(i.id)}},[r("svg",{class:"icon","aria-hidden":"true"},[r("use",{"xlink:href":i.icon},null)]),r("span",null,[i.name])])]})])))?S:{default:()=>[S]}),r(Q,{ref:a,onOpenSave:i=>{m(i)}},null),r(Z,{ref:e,menuList:D(t)},null)])}}});export{Qe as default};
